/*
 * Markdown ì½˜í…ì¸  ì „ìš© ìŠ¤íƒ€ì¼
 * ì§ì ‘ ìì‹ë§Œ íƒ€ê²ŸíŒ…í•˜ì—¬ Web Components ì œì™¸
 *
 * BEM êµ¬ì¡°:
 * Block: .markdown-content (ë§ˆí¬ë‹¤ìš´ ì½˜í…ì¸  ì»¨í…Œì´ë„ˆ)
 * CSS ë³€ìˆ˜ ë„¤ì„ìŠ¤í˜ì´ìŠ¤: --md-code-* (ì½”ë“œ ë¸”ë¡ ê´€ë ¨)
 */

/* ========================================
   CSS ë³€ìˆ˜ ì •ì˜
   ======================================== */
:root {
  /* ========================================
     Spacing Scale - 8px base unit
     ë„¤ì„ìŠ¤í˜ì´ìŠ¤: md-spacing (markdown-spacing)
     ì›ì¹™: Vertical rhythm ìœ ì§€, Proximity principle ì ìš©
     ======================================== */
  --md-spacing-xs: 0.5rem; /* 8px  - ë¦¬ìŠ¤íŠ¸ ì•„ì´í…œ ê°„ê²© */
  --md-spacing-sm: 0.75rem; /* 12px - h4 í•˜ë‹¨, blockquote ë‚´ë¶€ ë¬¸ë‹¨ */
  --md-spacing-md: 1rem; /* 16px - ê¸°ë³¸ ë¬¸ë‹¨ ê°„ê²©, h2/h3 í•˜ë‹¨ */
  --md-spacing-lg: 1.5rem; /* 24px - h1 ìƒí•˜, ì½”ë“œ/ì¸ìš© ìƒí•˜ */
  --md-spacing-xl: 2rem; /* 32px - h4 ìƒë‹¨ */
  --md-spacing-2xl: 2.5rem; /* 40px - h3 ìƒë‹¨ */
  --md-spacing-3xl: 3rem; /* 48px - h2 ìƒë‹¨ (ì„¹ì…˜ êµ¬ë¶„ ê°•í™”) */

  /* ========================================
     ì½”ë“œ ë¸”ë¡ ìƒ‰ìƒ
     ë„¤ì„ìŠ¤í˜ì´ìŠ¤: md-code (markdown-code)
     ======================================== */
  /* Light mode - GitHub ìŠ¤íƒ€ì¼ */
  --md-code-bg-light: #f6f8fa;
  --md-code-border-light: #d0d7de;
  --md-code-text-light: #24292f;
  --md-code-inline-bg-light: rgba(175, 184, 193, 0.2);
  --md-code-inline-border-light: rgba(175, 184, 193, 0.3);

  /* Dark mode - GitHub ìŠ¤íƒ€ì¼ */
  --md-code-bg-dark: #161b22;
  --md-code-border-dark: #30363d;
  --md-code-text-dark: #e6edf3;
  --md-code-inline-bg-dark: rgba(110, 118, 129, 0.3);
  --md-code-inline-border-dark: rgba(110, 118, 129, 0.4);

  /* Active theme (ê¸°ë³¸ê°’: light) */
  --md-code-bg: var(--md-code-bg-light);
  --md-code-border: var(--md-code-border-light);
  --md-code-text: var(--md-code-text-light);
  --md-code-inline-bg: var(--md-code-inline-bg-light);
  --md-code-inline-border: var(--md-code-inline-border-light);

  /* ê³µí†µ í°íŠ¸ ìŠ¤íƒ */
  --md-code-font-family:
    'SF Mono', Monaco, 'Cascadia Code', 'Roboto Mono', Consolas, 'Courier New',
    monospace;

  /* ========================================
     ë§í¬ ìƒ‰ìƒ
     ë„¤ì„ìŠ¤í˜ì´ìŠ¤: md-link (markdown-link)
     WCAG AA ê¸°ì¤€ ì¶©ì¡± (4.5:1 ëŒ€ë¹„)
     Note: visited ë§í¬ë„ ë™ì¼í•œ ìƒ‰ìƒ ìœ ì§€ (ë³´ë¼ìƒ‰ ë³€ê²½ ì—†ìŒ)
     ======================================== */
  /* Light mode - GitHub ìŠ¤íƒ€ì¼ */
  --md-link-color-light: #0969da;
  --md-link-color-hover-light: #0550ae;

  /* Dark mode - GitHub ìŠ¤íƒ€ì¼ */
  --md-link-color-dark: #58a6ff;
  --md-link-color-hover-dark: #79c0ff;

  /* Active theme (ê¸°ë³¸ê°’: light) */
  --md-link-color: var(--md-link-color-light);
  --md-link-color-hover: var(--md-link-color-hover-light);
}

@media (prefers-color-scheme: dark) {
  :root {
    --md-code-bg: var(--md-code-bg-dark);
    --md-code-border: var(--md-code-border-dark);
    --md-code-text: var(--md-code-text-dark);
    --md-code-inline-bg: var(--md-code-inline-bg-dark);
    --md-code-inline-border: var(--md-code-inline-border-dark);

    /* ë§í¬ ë‹¤í¬ ëª¨ë“œ */
    --md-link-color: var(--md-link-color-dark);
    --md-link-color-hover: var(--md-link-color-hover-dark);
  }
}

/* ========================================
   íƒ€ì´í¬ê·¸ë˜í”¼
   ì›ì¹™:
   - Proximity principle: ì œëª©ì€ í•˜ìœ„ ì½˜í…ì¸ ì™€ ê°€ê¹Œì´ (margin-top > margin-bottom)
   - Visual hierarchy: h2 > h3 > h4 ìˆœìœ¼ë¡œ ìƒë‹¨ ì—¬ë°± ì°¨ë“± ì ìš©
   - Vertical rhythm: 8px base unit ì‚¬ìš©
   ======================================== */

.markdown-content > h1,
.markdown-content > h2,
.markdown-content > h3,
.markdown-content > h4 {
  font-weight: 500;
  color: #444;
}

/* h1 - í˜ì´ì§€ ì œëª© */
.markdown-content > h1 {
  font-size: 2rem;
  font-weight: bold;
  margin-top: var(--md-spacing-lg); /* 24px - í˜ì´ì§€ ì‹œì‘ ì—¬ë°± */
  margin-bottom: var(--md-spacing-lg); /* 24px - í•˜ìœ„ ì½˜í…ì¸ ì™€ ì ì ˆí•œ ê±°ë¦¬ */
}

/* h2 - ì„¹ì…˜ êµ¬ë¶„ (ê°€ì¥ ì¤‘ìš”í•œ êµ¬ì¡°) */
.markdown-content > h2 {
  font-size: 1.75rem;
  margin-top: var(--md-spacing-3xl); /* 48px - ì„¹ì…˜ êµ¬ë¶„ ê°•í™” */
  margin-bottom: var(--md-spacing-md); /* 16px - í•˜ìœ„ ì½˜í…ì¸ ì™€ ê°€ê¹Œì´ */
}

/* h3 - í•˜ìœ„ ì„¹ì…˜ */
.markdown-content > h3 {
  font-size: 1.5rem;
  margin-top: var(--md-spacing-2xl); /* 40px - ì¤‘ê°„ ê³„ì¸µ êµ¬ë¶„ */
  margin-bottom: var(--md-spacing-md); /* 16px - í•˜ìœ„ ì½˜í…ì¸ ì™€ ê°€ê¹Œì´ */
}

/* h4 - ì„¸ë¶€ í•­ëª© */
.markdown-content > h4 {
  font-size: 1.2rem;
  margin-top: var(--md-spacing-xl); /* 32px - ìµœì†Œ êµ¬ë¶„ ì—¬ë°± */
  margin-bottom: var(--md-spacing-sm); /* 12px - í•˜ìœ„ ì½˜í…ì¸ ì™€ ë§¤ìš° ê°€ê¹Œì´ */
}

/* p - ë¬¸ë‹¨ (ê°€ì¥ ì¤‘ìš”í•œ ë³€ê²½) */
.markdown-content > p {
  font-size: 1rem;
  line-height: 1.7; /* 1.6 â†’ 1.7 ì¦ê°€: ê°€ë…ì„± í–¥ìƒ */
  margin-bottom: var(--md-spacing-md); /* 16px - 0.5rem(8px)ì—ì„œ ì¦ê°€ */
  color: #222;
}

/* ========================================
   Contextual spacing - ì œëª© ë°”ë¡œ ë‹¤ìŒ ìš”ì†Œ
   ì›ì¹™: ì œëª©ê³¼ ì²« ë²ˆì§¸ ì½˜í…ì¸ ëŠ” ë”ìš± ê°€ê¹Œì´
   ======================================== */
.markdown-content > h2 + p,
.markdown-content > h3 + p,
.markdown-content > h4 + p {
  margin-top: 0; /* ì œëª©ì˜ margin-bottomë§Œ ì ìš© */
}

/* ========================================
   ë¦¬ìŠ¤íŠ¸
   ì›ì¹™:
   - ë¦¬ìŠ¤íŠ¸ ì»¨í…Œì´ë„ˆëŠ” ë‹¤ë¥¸ ë¸”ë¡ ìš”ì†Œì™€ ë™ì¼í•œ í•˜ë‹¨ ì—¬ë°±
   - ë¦¬ìŠ¤íŠ¸ ì•„ì´í…œ ê°„ê²©ì€ ìµœì†Œ ë‹¨ìœ„ ì‚¬ìš© (ë°€ë„ ìœ ì§€)
   - ì¤‘ì²© ë¦¬ìŠ¤íŠ¸ëŠ” ìƒí•˜ ì—¬ë°± ìµœì†Œí™”
   ======================================== */

/* ë¦¬ìŠ¤íŠ¸ ì»¨í…Œì´ë„ˆ */
.markdown-content > ul,
.markdown-content > ol {
  margin-left: 1.5rem;
  padding-left: 1rem;
  margin-bottom: var(--md-spacing-lg); /* 24px - ë¸”ë¡ ìš”ì†Œ ê°„ê²© í†µì¼ */
  color: #222;
}

.markdown-content > ul {
  list-style-type: disc;
}

.markdown-content > ol {
  list-style-type: decimal;
}

/* ë¦¬ìŠ¤íŠ¸ ì•„ì´í…œ */
.markdown-content > ul > li,
.markdown-content > ol > li {
  margin-bottom: var(--md-spacing-xs); /* 8px - ìµœì†Œ ë‹¨ìœ„ */
  font-size: 1rem;
  line-height: 1.7; /* 1.6 â†’ 1.7: ë¬¸ë‹¨ê³¼ í†µì¼ */
}

/* ë§ˆì§€ë§‰ ì•„ì´í…œì€ í•˜ë‹¨ ì—¬ë°± ì œê±° */
.markdown-content > ul > li:last-child,
.markdown-content > ol > li:last-child {
  margin-bottom: 0;
}

/* ì¤‘ì²© ë¦¬ìŠ¤íŠ¸ */
.markdown-content ul ul,
.markdown-content ol ol,
.markdown-content ul ol,
.markdown-content ol ul {
  margin-left: 1.5rem;
  padding-left: 1rem;
  margin-top: var(--md-spacing-xs); /* 8px - ìƒìœ„ ì•„ì´í…œê³¼ ê°„ê²© */
  margin-bottom: var(--md-spacing-xs); /* 8px - ë‹¤ìŒ ì•„ì´í…œê³¼ ê°„ê²© */
}

/* ========================================
   ì½”ë“œ ë¸”ë¡ - BEM êµ¬ì¡°
   Block: .markdown-content
   Element (ë…¼ë¦¬ì ): pre (ì½”ë“œ ë¸”ë¡), code (ì½”ë“œ í…ìŠ¤íŠ¸/ì¸ë¼ì¸)
   Note: ë§ˆí¬ë‹¤ìš´ íŒŒì„œê°€ ìƒì„±í•˜ëŠ” HTMLì´ë¯€ë¡œ Element í´ë˜ìŠ¤ë¥¼ ì§ì ‘ ë¶™ì¼ ìˆ˜ ì—†ìŒ
         ëŒ€ì‹  í•˜ìœ„ ì…€ë ‰í„°ë¡œ íƒ€ê²ŸíŒ…
   ======================================== */

/* Element (ë…¼ë¦¬ì ): ì¸ë¼ì¸ ì½”ë“œ (<code>) - pre ì•ˆì— ì—†ëŠ” ê²½ìš°ë§Œ */
.markdown-content code {
  font-size: 0.875rem;
  font-family: var(--md-code-font-family);
  background-color: var(--md-code-inline-bg);
  color: var(--md-code-text);
  padding: 0.125rem 0.375rem;
  border: 1px solid var(--md-code-inline-border);
  border-radius: 4px;
  white-space: nowrap;
}

/* Element (ë…¼ë¦¬ì ): ì½”ë“œ ë¸”ë¡ ì»¨í…Œì´ë„ˆ (<pre>) - ìì† ì…€ë ‰í„° ì‚¬ìš© */
.markdown-content pre {
  padding: 1.25rem; /* 20px - 1rem(16px)ì—ì„œ ì¦ê°€: ë‚´ë¶€ ì—¬ìœ  ê³µê°„ í™•ë³´ */
  background-color: var(--md-code-bg);
  border: 1px solid var(--md-code-border);
  border-radius: 8px;
  overflow-x: auto;
  line-height: 1.5;
  margin-top: var(--md-spacing-lg); /* 24px - 1rem(16px)ì—ì„œ ì¦ê°€ */
  margin-bottom: var(--md-spacing-lg); /* 24px - 1rem(16px)ì—ì„œ ì¦ê°€ */
  box-shadow: 0 1px 3px rgba(0, 0, 0, 0.05);
}

/* Contextual spacing - ì œëª© ë°”ë¡œ ë‹¤ìŒ ì½”ë“œ ë¸”ë¡ */
.markdown-content > h2 + pre,
.markdown-content > h3 + pre,
.markdown-content > h4 + pre {
  margin-top: var(--md-spacing-md); /* 16px - ì œëª©ê³¼ ê°€ê¹Œì´ */
}

/* Contextual spacing - ì½”ë“œ ë¸”ë¡ ë°”ë¡œ ë‹¤ìŒ ì œëª© */
.markdown-content > pre + h2,
.markdown-content > pre + h3,
.markdown-content > pre + h4 {
  margin-top: var(--md-spacing-3xl); /* 48px - ì„¹ì…˜ ì „í™˜ ëª…í™•í™” */
}

/* Dark mode ì¶”ê°€ ì¡°ì • */
@media (prefers-color-scheme: dark) {
  .markdown-content pre {
    box-shadow: 0 1px 3px rgba(0, 0, 0, 0.3);
  }
}

/* Element (ë…¼ë¦¬ì ): ì½”ë“œ ë¸”ë¡ ë‚´ë¶€ í…ìŠ¤íŠ¸ (<pre><code>) - ì¸ë¼ì¸ ìŠ¤íƒ€ì¼ ì˜¤ë²„ë¼ì´ë“œ */
.markdown-content pre code {
  display: block;
  background: transparent;
  color: var(--md-code-text);
  white-space: pre;
  font-family: var(--md-code-font-family);
  font-size: 0.875rem;
  line-height: 1.6;
  padding: 0;
  border: none;
  border-radius: 0;
}

/* ========================================
   ë§í¬ ìŠ¤íƒ€ì¼
   Note: visited ë§í¬ë„ ë™ì¼í•œ ìƒ‰ìƒ ìœ ì§€ (ë³´ë¼ìƒ‰ ë³€ê²½ ì—†ìŒ)
   ======================================== */

/* ëª¨ë“  í•˜ìœ„ ë§í¬ì— ê¸°ë³¸ ìŠ¤íƒ€ì¼ ì ìš© */
.markdown-content a {
  color: var(--md-link-color);
  text-decoration: none;
  transition: color 0.2s ease-in-out;
}

.markdown-content a:hover {
  color: var(--md-link-color-hover);
}

/* visited ë§í¬ë„ ë™ì¼í•œ íŒŒë€ìƒ‰ ìœ ì§€ */
.markdown-content a:visited {
  color: var(--md-link-color);
}

/* í‚¤ë³´ë“œ ë„¤ë¹„ê²Œì´ì…˜ ì ‘ê·¼ì„± */
.markdown-content a:focus-visible {
  outline: 2px solid var(--md-link-color);
  outline-offset: 2px;
  border-radius: 2px;
}

/* ì™¸ë¶€ ë§í¬ ì•„ì´ì½˜ */
.markdown-content a.external-link::after {
  content: ' ğŸ”—';
  font-size: 0.8em;
  opacity: 0.7;
}

/* ========================================
   ì¸ìš©êµ¬ (blockquote)
   ì›ì¹™: ì½”ë“œ ë¸”ë¡ê³¼ ë™ì¼í•œ ìƒí•˜ ì—¬ë°±, ë‚´ë¶€ëŠ” ë°€ë„ ë†’ê²Œ
   ======================================== */

.markdown-content > blockquote {
  border-left: 4px solid #007bff;
  padding: var(--md-spacing-md) 1.25rem; /* ìƒí•˜ 16px, ì¢Œìš° 20px */
  margin-top: var(--md-spacing-lg); /* 24px */
  margin-bottom: var(--md-spacing-lg); /* 24px */
  background-color: #f8f9fa;
  font-style: italic;
  color: #555;
}

/* blockquote ë‚´ë¶€ ë¬¸ë‹¨ ê°„ê²© */
.markdown-content > blockquote > p {
  margin-bottom: var(--md-spacing-sm); /* 12px - ì¸ìš©êµ¬ ë‚´ë¶€ëŠ” ë°€ë„ ë†’ê²Œ */
}

.markdown-content > blockquote > p:last-child {
  margin-bottom: 0; /* ë§ˆì§€ë§‰ ë¬¸ë‹¨ì€ ì—¬ë°± ì œê±° */
}

/* ========================================
   ê¸°íƒ€ ìš”ì†Œ
   ======================================== */

/* YouTube ì„ë² ë“œëŠ” í´ë˜ìŠ¤ ê¸°ë°˜ì´ë¯€ë¡œ ê·¸ëŒ€ë¡œ */
.markdown-content .youtube-video {
  position: relative;
  padding-bottom: 56.25%;
  height: 0;
  overflow: hidden;
  max-width: 100%;
  max-height: auto;
}

.markdown-content .youtube-video iframe {
  position: absolute;
  top: 0;
  left: 0;
  width: 100%;
  height: 100%;
}
